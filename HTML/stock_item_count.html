<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../CSS/global.css">
    <link rel="stylesheet" href="../CSS/stock_item_count.css">
    <title>SvvvInvento</title>
</head>

<body>
    <div class="hero-wrapper">
        <div class="hero">
            <div class="hero-left">
                <div class="sidebar">
                    <div class="sidebar-header">
                        <img src="../assets/logo.jpg" alt="">
                        <h2>SvvvInvento</h2>
                    </div>
                    <div class="sidebar-menu">
                        <ul>
                          <li>
                            <a href="AdminDashboard.jsp" activeClassName="active" id="hover">Dashboard</a>
                          </li>
                          <li>
                            <a href="StockCountList.jsp"  activeClassName="active" id="hover">Stock Item Count</a>
                          </li>
                          <li>
                            <a href="IssuedItemCount.jsp" activeClassName="active" id="hover">Issued Item Count</a>
                          </li>
                          <li>
                            <a href="PastIssuedHistory.jsp" activeClassName="active" id="hover">Past Issued History</a>
                          </li>
                          <li>
                            <a href="PastItemHistory.jsp" activeClassName="active" id="hover">Past Discontinued Item History</a>
                          </li>
                          <li>
                            <a href="IssueItemsForm.jsp" activeClassName="active" id="hover">Issue Item Form</a>
                          </li>
                          <li>
                            <a href="AddItems.jsp" activeClassName="active" id="hover">Add Item</a>
                          </li>
                        </ul>
                      </div>
                    <div class="sidebar-profile">
                        <div class="profile-section">
                            <img src="../assets/profile.jpeg" alt="Profile">
                            <span>Aditya Patel</span>
                            <div class="profile-dropdown">
                                <ul>
                                    <li>
                                        <a href="../HTML/about_us.html">About Us</a>
                                    </li>
                                    <li>
                                        <a href="/">Support</a>
                                    </li>
                                    <li>
                                        <a href="../HTML/change_password.html">Change Password</a>
                                    </li>
                                    <li>
                                        <a href="../HTML/admin_profile.html">Admin Profile</a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
            <div class="hero-right">
                <div class="heading">
                    <h1>Stock Item Count</h1>
                </div>
                <div class="search-download-btn-container">
                    <div class="search-field">
                        <input type="text" placeholder="Search" name="text" class="input" />
                        <button class="search-btn" onclick={handleSearch}>Search</button>
                    </div>
                    <button class="download-btn">Download Excel</button>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>S.No</th>
                                <th>Item</th>
                                <th>Item Company Name</th>
                                <th>Item Serial No</th>
                                <th>SVVV Encoded No</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1</td>
                                <td>Widget A</td>
                                <td>ABC Corp</td>
                                <td>ABC123</td>
                                <td>SVVV001</td>
                                <td>
                                    <button onclick="location.href='../HTML/stock_item_info.html'">More Info</button>
                                    <button>Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>2</td>
                                <td>Widget B</td>
                                <td>ABCD Corp</td>
                                <td>ABC122</td>
                                <td>SVVV002</td>
                                <td>
                                    <button onclick="location.href='../HTML/stock_item_info.html'">More Info</button>
                                    <button>Delete</button>
                                </td>
                            </tr>
                            <tr>
                                <td>3</td>
                                <td>Widget C</td>
                                <td>ABCD Corp</td>
                                <td>ABC124</td>
                                <td>SVVV003</td  style="display: none">
                                <td>
                                    <button onclick="location.href='../HTML/stock_item_info.html'">More Info</button>
                                    <button>Delete</button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="delete-modal" style="display: none;">
                    <div class="modal-content">
                        <h2>
                            Are you sure you want to delete this "ABC123" item permanently from SvvvInvento? then insert
                            date and delete the item
                        </h2>
                        <input type="date" required />
                        <br />
                        <br />
                        <button>Delete</button>
                        <span></span>
                        <button>Cancel</button>
                    </div>
                </div>
            </div>
        </div>


        <script>
// Get the table, input, and search button elements
const table = document.querySelector('.table-wrapper table');
const searchInput = document.querySelector('.search-field .input');
const searchBtn = document.querySelector('.search-field .search-btn');

// Add an event listener to the search button
searchBtn.addEventListener('click', handleSearch);

function handleSearch() {
  // Get the search query from the input field
  const searchQuery = searchInput.value.toLowerCase();

  // Get all the rows in the table (excluding the header row)
  const rows = table.getElementsByTagName('tr');

  // Loop through the rows and hide/show them based on the search query
  for (let i = 1; i < rows.length; i++) {
    const row = rows[i];
    let found = false;

    // Check if any cell in the row contains the search query
    for (let j = 0; j < row.cells.length; j++) {
      const cell = row.cells[j];
      if (cell.textContent.toLowerCase().includes(searchQuery)) {
        found = true;
        break;
      }
    }

    // Show the row if the search query is found, hide it otherwise
    if (found) {
      row.style.display = '';
    } else {
      row.style.display = 'none';
    }
  }
}



// Get the table, delete buttons, and delete modal elements
// const table = document.querySelector('.table-wrapper table');
const deleteBtns = document.querySelectorAll('.table-wrapper button:nth-of-type(2)');
const deleteModal = document.querySelector('.delete-modal');
const deleteInput = deleteModal.querySelector('input[type="date"]');
const deleteBtn = deleteModal.querySelector('.delete-modal button:nth-of-type(1)');
const cancelBtn = deleteModal.querySelector('.delete-modal button:nth-of-type(2)');

// Add event listeners
deleteBtns.forEach((btn) => {
  btn.addEventListener('click', showDeleteModal);
});
deleteBtn.addEventListener('click', handleDelete);
cancelBtn.addEventListener('click', hideDeleteModal);
deleteInput.addEventListener('input', toggleDeleteButton);

let selectedRow = null;

function showDeleteModal(event) {
  const row = event.target.closest('tr');
  const serialNumber = row.cells[3].textContent;
  deleteModal.querySelector('h2').textContent = `Are you sure you want to delete this  "${serialNumber}" item permanently from SvvvInvento? then insert
                            date and delete the item`;
  deleteModal.style.display = 'flex';
  deleteModal.style.justifyContent = 'center';
  deleteModal.style.alignItems = 'center';
  selectedRow = row;
}

function handleDelete() {
  if (deleteInput.value) {
    selectedRow.parentNode.removeChild(selectedRow);
    hideDeleteModal();
  }
}

function hideDeleteModal() {
  deleteModal.style.display = 'none';
  deleteInput.value = '';
  selectedRow = null;
}

function toggleDeleteButton() {
  deleteBtn.disabled = !deleteInput.value;
}









// Get all the links in the sidebar menu
const sidebarLinks = document.querySelectorAll('.sidebar-menu a');
const dashboardLink = document.querySelector('.sidebar-menu a[href="../HTML/stock_item_count.html"]');

// Add event listeners to each link
sidebarLinks.forEach((link) => {
  link.addEventListener('click', handleLinkClick);
});

// Function to handle link clicks
function handleLinkClick(event) {
  event.preventDefault();

  // Remove the active class from all links
  sidebarLinks.forEach((link) => {
    link.classList.remove('active');
  });

  // Add the active class to the clicked link
  event.target.classList.add('active');

  // Navigate to the clicked link
  window.location.href = event.target.getAttribute('href');
}

// Set the dashboard link to be active by default
dashboardLink.classList.add('active');

        </script>
</body>

</html>